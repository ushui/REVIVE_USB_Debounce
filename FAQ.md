# REVIVE USB よくある質問

## Q.昭光式ボタンに接続したいのですが、どのように接続したらランプが点灯しますでしょうか？

### A.以下の回路を参照下さい
動作の保証はいたしかねますが、ボタンを押している間点灯する回路として、REVIVE USBより5V、GND、スイッチ接続端子Px(xは1~12のポート)を引き出し、
以下のように接続する例が考えられます。
抵抗Rの値につきましてはスイッチの仕様に合わせた値を選定下さい。

----

# 対策版 よくある質問

## Q: 対策版を適用してもチャタリングが発生してしまいました。
### A: サンプリング周期または一致検出回数を変更することでチャタリング対策を強化できます。
ひとまず設定値を以下に変更してください。  
 - チャタリング防止設定：サンプリング周期=10ms、一致検出回数=3回
 
それでも改善しない場合は、さらに数値を増やして適正値を見つけてください。  
あまりに酷いようであれば、スイッチの接続に問題があるかスイッチの故障を疑ってください。  

## Q: 遅延を最小限にする設定をしたいのですが、どうすればよいですか？
### A: チャタリング防止設定の値をすべて1に設定してください。
チャタリング防止機能を無効化できます。  

## Q: サンプリング周期と一致検出回数のデフォルト値の根拠は何ですか？
### A: 実体験に基づいたフィーリングです。
対策版を作成した当初はサンプリング周期=10ms／一致検出回数=3回でしたが、途中から4ms／2回に変更しています。  
後者の設定で賄えるパターンが実はほとんどなのでは？　と感じたので、もしもこの設定でチャタリングが起きたならば設定値を変えてもらおうという思想で作りました。  
参考までに設定値の決め方は以下です。  

#### デジタル入力
対策版ファームウェアを使用した個人的な経験では、マイクロスイッチ使用時にはサンプリング周期=3ms(一致検出回数=1回)もしくは2ms(2回)からチャタリングが起こらなくなります。  
チャタリングの確認方法は、適当なキーボード入力にしておき、何度もスイッチを押してみて、キーを1回しか入力していないのに2回入力されることがあるか、という方法です。  
経験に基づき、スイッチの劣化も考慮すると4ms(2回)くらいにしておけばいいかな、という感覚で設定しました。  

一般的にマイクロスイッチのチャタリング時間には1～10msの幅があると言われています。  
4ms(2回)の設定ならチャタリング時間=8msまでカバーできるため、おおよそこの程度で間違いはないと思います。  
